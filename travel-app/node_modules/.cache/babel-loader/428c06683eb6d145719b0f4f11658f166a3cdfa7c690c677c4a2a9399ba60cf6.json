{"ast":null,"code":"import React,{useState,useEffect}from'react';import Cookies from'universal-cookie';import api from\"./api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Flights=()=>{const cookies=new Cookies();const[userRole,setUserRole]=useState('');const[flights,setFlights]=useState([]);const[newFlight,setNewFlight]=useState({airline:''});// Fetch all flights\nconst getAllFlights=async()=>{try{const response=await api.get('/admin/get_all_flights/');setFlights(response.data);// Assuming the response contains an array of flights\n}catch(error){console.error('Error fetching flights:',error);}};// Add a new flight\nconst addFlight=async()=>{try{await api.post('/admin/add_flight/',newFlight);setNewFlight({});// Clear the newFlight state after adding\n// Optionally, you can refresh the flight list after adding a new flight\ngetAllFlights();}catch(error){console.error('Error adding flight:',error);}};// Delete a flight by ID\nconst deleteFlight=async flightId=>{try{await api.delete(\"/admin/delete_flight/\".concat(flightId));// Refresh the flight list after deleting a flight\ngetAllFlights();}catch(error){console.error('Error deleting flight:',error);}};// Update a flight by ID\nconst updateFlight=async(flightId,updatedFlight)=>{try{await api.put(\"/admin/update_flight/\".concat(flightId),updatedFlight);// Refresh the flight list after updating a flight\ngetAllFlights();}catch(error){console.error('Error updating flight:',error);}};// Handle input change for adding a new flight\nconst handleInputChange=event=>{const{name,value}=event.target;setNewFlight({...newFlight,[name]:value});};useEffect(()=>{// Read the cookies when the component mounts\nconst adminToken=cookies.get('admin_token');const userToken=cookies.get('user_token');// Determine the user role based on the presence of tokens\nif(adminToken){setUserRole('admin');}else if(userToken){setUserRole('user');}},[cookies]);useEffect(()=>{if(userRole==='admin'){getAllFlights();// Fetch flights for admin role\n}},[userRole]);return/*#__PURE__*/_jsxs(\"div\",{children:[userRole==='admin'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"ul\",{children:flights.map(flight=>/*#__PURE__*/_jsxs(\"li\",{children:[flight.flight_number,/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteFlight(flight.id),children:\"Delete\"})]},flight.id))}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:addFlight,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"flight_number\",placeholder:\"Enter Flight Number\",value:newFlight.flight_number||'',onChange:handleInputChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add Flight\"})]})]}),userRole==='user'&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{children:\"User Functionality\"})})]});};export default Flights;","map":{"version":3,"names":["React","useState","useEffect","Cookies","api","jsx","_jsx","jsxs","_jsxs","Flights","cookies","userRole","setUserRole","flights","setFlights","newFlight","setNewFlight","airline","getAllFlights","response","get","data","error","console","addFlight","post","deleteFlight","flightId","delete","concat","updateFlight","updatedFlight","put","handleInputChange","event","name","value","target","adminToken","userToken","children","map","flight","flight_number","onClick","id","onSubmit","type","placeholder","onChange"],"sources":["D:/Work/Travel-WebApp/travel-app/src/Flights.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Cookies from 'universal-cookie';\r\nimport api from \"./api\";\r\n\r\nconst Flights = () => {\r\n    const cookies = new Cookies();\r\n    const [userRole, setUserRole] = useState('');\r\n    const [flights, setFlights] = useState([]);\r\n    const [newFlight, setNewFlight] = useState({\r\n        airline : '',\r\n\r\n    });\r\n\r\n    // Fetch all flights\r\n    const getAllFlights = async () => {\r\n        try {\r\n            const response = await api.get('/admin/get_all_flights/');\r\n            setFlights(response.data); // Assuming the response contains an array of flights\r\n        } catch (error) {\r\n            console.error('Error fetching flights:', error);\r\n        }\r\n    };\r\n\r\n    // Add a new flight\r\n    const addFlight = async () => {\r\n        try {\r\n            await api.post('/admin/add_flight/', newFlight);\r\n            setNewFlight({}); // Clear the newFlight state after adding\r\n            // Optionally, you can refresh the flight list after adding a new flight\r\n            getAllFlights();\r\n        } catch (error) {\r\n            console.error('Error adding flight:', error);\r\n        }\r\n    };\r\n\r\n    // Delete a flight by ID\r\n    const deleteFlight = async (flightId) => {\r\n        try {\r\n            await api.delete(`/admin/delete_flight/${flightId}`);\r\n            // Refresh the flight list after deleting a flight\r\n            getAllFlights();\r\n        } catch (error) {\r\n            console.error('Error deleting flight:', error);\r\n        }\r\n    };\r\n\r\n    // Update a flight by ID\r\n    const updateFlight = async (flightId, updatedFlight) => {\r\n        try {\r\n            await api.put(`/admin/update_flight/${flightId}`, updatedFlight);\r\n            // Refresh the flight list after updating a flight\r\n            getAllFlights();\r\n        } catch (error) {\r\n            console.error('Error updating flight:', error);\r\n        }\r\n    };\r\n\r\n    // Handle input change for adding a new flight\r\n    const handleInputChange = (event) => {\r\n        const { name, value } = event.target;\r\n        setNewFlight({\r\n            ...newFlight,\r\n            [name]: value,\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        // Read the cookies when the component mounts\r\n        const adminToken = cookies.get('admin_token');\r\n        const userToken = cookies.get('user_token');\r\n\r\n        // Determine the user role based on the presence of tokens\r\n        if (adminToken) {\r\n            setUserRole('admin');\r\n        } else if (userToken) {\r\n            setUserRole('user');\r\n        }\r\n    }, [cookies]);\r\n\r\n    useEffect(() => {\r\n        if (userRole === 'admin') {\r\n            getAllFlights(); // Fetch flights for admin role\r\n        }\r\n    }, [userRole]);\r\n\r\n    return (\r\n        <div>\r\n            {/* Your navigation links */}\r\n            {userRole === 'admin' && (\r\n                <div>\r\n                    {/* Display admin-specific functionalities */}\r\n                    {/* Flight Management Interface */}\r\n                    <ul>\r\n                        {flights.map((flight) => (\r\n                            <li key={flight.id}>\r\n                                {flight.flight_number}\r\n                                <button onClick={() => deleteFlight(flight.id)}>Delete</button>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                    <form onSubmit={addFlight}>\r\n                        <input\r\n                            type=\"text\"\r\n                            name=\"flight_number\"\r\n                            placeholder=\"Enter Flight Number\"\r\n                            value={newFlight.flight_number || ''}\r\n                            onChange={handleInputChange}\r\n                        />\r\n                        <button type=\"submit\">Add Flight</button>\r\n                    </form>\r\n                </div>\r\n            )}\r\n            {userRole === 'user' && (\r\n                <div>\r\n                    {/* Display user-specific functionalities */}\r\n                    {/* Add user-specific UI elements or functionalities */}\r\n                    <button>User Functionality</button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Flights;\r\n\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,OAAO,KAAM,kBAAkB,CACtC,MAAO,CAAAC,GAAG,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAExB,KAAM,CAAAC,OAAO,CAAGA,CAAA,GAAM,CAClB,KAAM,CAAAC,OAAO,CAAG,GAAI,CAAAP,OAAO,CAAC,CAAC,CAC7B,KAAM,CAACQ,QAAQ,CAAEC,WAAW,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACc,SAAS,CAAEC,YAAY,CAAC,CAAGf,QAAQ,CAAC,CACvCgB,OAAO,CAAG,EAEd,CAAC,CAAC,CAEF;AACA,KAAM,CAAAC,aAAa,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAf,GAAG,CAACgB,GAAG,CAAC,yBAAyB,CAAC,CACzDN,UAAU,CAACK,QAAQ,CAACE,IAAI,CAAC,CAAE;AAC/B,CAAE,MAAOC,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CACnD,CACJ,CAAC,CAED;AACA,KAAM,CAAAE,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC1B,GAAI,CACA,KAAM,CAAApB,GAAG,CAACqB,IAAI,CAAC,oBAAoB,CAAEV,SAAS,CAAC,CAC/CC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAE;AAClB;AACAE,aAAa,CAAC,CAAC,CACnB,CAAE,MAAOI,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAChD,CACJ,CAAC,CAED;AACA,KAAM,CAAAI,YAAY,CAAG,KAAO,CAAAC,QAAQ,EAAK,CACrC,GAAI,CACA,KAAM,CAAAvB,GAAG,CAACwB,MAAM,yBAAAC,MAAA,CAAyBF,QAAQ,CAAE,CAAC,CACpD;AACAT,aAAa,CAAC,CAAC,CACnB,CAAE,MAAOI,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAClD,CACJ,CAAC,CAED;AACA,KAAM,CAAAQ,YAAY,CAAG,KAAAA,CAAOH,QAAQ,CAAEI,aAAa,GAAK,CACpD,GAAI,CACA,KAAM,CAAA3B,GAAG,CAAC4B,GAAG,yBAAAH,MAAA,CAAyBF,QAAQ,EAAII,aAAa,CAAC,CAChE;AACAb,aAAa,CAAC,CAAC,CACnB,CAAE,MAAOI,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAClD,CACJ,CAAC,CAED;AACA,KAAM,CAAAW,iBAAiB,CAAIC,KAAK,EAAK,CACjC,KAAM,CAAEC,IAAI,CAAEC,KAAM,CAAC,CAAGF,KAAK,CAACG,MAAM,CACpCrB,YAAY,CAAC,CACT,GAAGD,SAAS,CACZ,CAACoB,IAAI,EAAGC,KACZ,CAAC,CAAC,CACN,CAAC,CAEDlC,SAAS,CAAC,IAAM,CACZ;AACA,KAAM,CAAAoC,UAAU,CAAG5B,OAAO,CAACU,GAAG,CAAC,aAAa,CAAC,CAC7C,KAAM,CAAAmB,SAAS,CAAG7B,OAAO,CAACU,GAAG,CAAC,YAAY,CAAC,CAE3C;AACA,GAAIkB,UAAU,CAAE,CACZ1B,WAAW,CAAC,OAAO,CAAC,CACxB,CAAC,IAAM,IAAI2B,SAAS,CAAE,CAClB3B,WAAW,CAAC,MAAM,CAAC,CACvB,CACJ,CAAC,CAAE,CAACF,OAAO,CAAC,CAAC,CAEbR,SAAS,CAAC,IAAM,CACZ,GAAIS,QAAQ,GAAK,OAAO,CAAE,CACtBO,aAAa,CAAC,CAAC,CAAE;AACrB,CACJ,CAAC,CAAE,CAACP,QAAQ,CAAC,CAAC,CAEd,mBACIH,KAAA,QAAAgC,QAAA,EAEK7B,QAAQ,GAAK,OAAO,eACjBH,KAAA,QAAAgC,QAAA,eAGIlC,IAAA,OAAAkC,QAAA,CACK3B,OAAO,CAAC4B,GAAG,CAAEC,MAAM,eAChBlC,KAAA,OAAAgC,QAAA,EACKE,MAAM,CAACC,aAAa,cACrBrC,IAAA,WAAQsC,OAAO,CAAEA,CAAA,GAAMlB,YAAY,CAACgB,MAAM,CAACG,EAAE,CAAE,CAAAL,QAAA,CAAC,QAAM,CAAQ,CAAC,GAF1DE,MAAM,CAACG,EAGZ,CACP,CAAC,CACF,CAAC,cACLrC,KAAA,SAAMsC,QAAQ,CAAEtB,SAAU,CAAAgB,QAAA,eACtBlC,IAAA,UACIyC,IAAI,CAAC,MAAM,CACXZ,IAAI,CAAC,eAAe,CACpBa,WAAW,CAAC,qBAAqB,CACjCZ,KAAK,CAAErB,SAAS,CAAC4B,aAAa,EAAI,EAAG,CACrCM,QAAQ,CAAEhB,iBAAkB,CAC/B,CAAC,cACF3B,IAAA,WAAQyC,IAAI,CAAC,QAAQ,CAAAP,QAAA,CAAC,YAAU,CAAQ,CAAC,EACvC,CAAC,EACN,CACR,CACA7B,QAAQ,GAAK,MAAM,eAChBL,IAAA,QAAAkC,QAAA,cAGIlC,IAAA,WAAAkC,QAAA,CAAQ,oBAAkB,CAAQ,CAAC,CAClC,CACR,EACA,CAAC,CAEd,CAAC,CAED,cAAe,CAAA/B,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}